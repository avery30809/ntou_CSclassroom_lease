<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <title>查詢結果</title>
    <link rel="stylesheet" href="CSS/index.css">
</head>

<body>

    <div class="datePickerValue">
        <p id="selectedDatePlaceholder"></p>
    </div>


    <div class="total">

        <div class="droplist">
            <div class="select-menu">
                <div class="select-btn">
                    <span class="sBtn-text">請選擇查詢條件</span>
                    <img class="sBtn-img" src="dropdownIcon.png">
                </div>

                <ul class="options">
                    <li class="option">
                        <span class="option-text">選擇特定時段</span>
                    </li>
                    <li class="option">
                        <span class="option-text">輸入教室名稱</span>
                    </li>
                </ul>
            </div>

            <div class="query">
                <input class="blank" type="text" placeholder="">

                <input class="inputClassRoomName" type="text" placeholder="輸入教室名稱">

                <div class="inputTimeInterval">

                    <input class="time" type="time">
                    <img class="queryImage" src="right.png" alt="Query">
                    <input class="time" type="time">
                </div>

                <form action="index.html" method="get">
                    <button type="submit" class="queryButton">
                        <img class="queryImage" src="queryIcon.png" alt="Query">
                    </button>
                </form>
            </div>


        </div>

        <div class="content-container">
            <div class="text">
                <!-- <h1>以下是查詢的教室目前狀態</h1> -->
                <span>教室名稱</span>
                <span class="gap">教室位置</span>
                <span>借用情況</span>
                <div class="wrap"></div>

                <span onclick="showPopupClassroom()" class="classroomName">XXX教室</span>
                <span class="gap">ECG608</span>
                <!-- 狀態條 -->
                <div class="totalBar">
                    <div class="nowState-bar">30%</div>
                </div>
            </div>


            <!-- 彈跳視窗內容 -->
            <div id="popup" class="popup">
                <h1>XXX教室</h1>
                <button type="button" onclick="closePopupClassroom()" class="close">
                    <img src="close.png" alt="Close">
                </button>
                <div class="content">
                    <span>起始時間</span><span>結束時間</span><span>借用狀態</span>
                    <div class="wrap"></div>
                    <span>9 a.m.</span><span>10 a.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>10 a.m.</span><span>11 a.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>11 a.m.</span><span>12 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>12 p.m.</span><span>13 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>13 p.m.</span><span>14 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>14 p.m.</span><span>15 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>15 p.m.</span><span>16 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>16 p.m.</span><span>17 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>17 p.m.</span><span>18 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>18 p.m.</span><span>19 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <span>19 p.m.</span><span>20 p.m.</span><span onclick="CheckAuthentication()" class="classroomState">未借用</span>
                    <div class="wrap"></div>
                    <!-- <p></p>
            <p></p> -->
                </div>
            </div>
        </div>
    </div>
    <script>

        // 獲取查詢的日期值
        const selectedDate = localStorage.getItem("selectedDate");
        if (selectedDate) {
            document.getElementById("selectedDatePlaceholder").textContent = "以下是" + selectedDate + "教室狀態查詢結果";
        }

        // 大部分功能
        const optionMenu = document.querySelector(".select-menu"),
            selectBtn = optionMenu.querySelector(".select-btn"),
            options = optionMenu.querySelectorAll(".option"),
            sBtn_text = optionMenu.querySelector(".sBtn-text"),
            queryBlank = document.querySelector(".blank"),
            queryClassRoom = document.querySelector(".inputClassRoomName"),
            queryTimeInterval = document.querySelector(".inputTimeInterval");

        selectBtn.addEventListener("click", () => optionMenu.classList.toggle("active"));

        options.forEach(option => {
            option.addEventListener("click", () => {
                let selectedOption = option.querySelector(".option-text").innerText;
                sBtn_text.innerText = selectedOption;

                if (selectedOption === "輸入教室名稱") {
                    queryBlank.style.display = "none";
                    queryClassRoom.style.display = "flex";
                    queryTimeInterval.style.display = "none";

                }
                else if (selectedOption === "選擇特定時段") {
                    queryBlank.style.display = "none";
                    queryClassRoom.style.display = "none";
                    queryTimeInterval.style.display = "flex";
                }
                else {
                    queryBlank.style.display = "flex";
                    queryClassRoom.style.display = "none";
                    queryTimeInterval.style.display = "none";
                }

                optionMenu.classList.remove("active");
            })
        })

        //彈跳視窗
        let popup = document.getElementById("popup");

        // 點擊教室開啟彈跳視窗的函數
        function showPopupClassroom() {
            popup.classList.add("open-popup");
        }

        function closePopupClassroom() {
            popup.classList.remove("open-popup");
        }



        //檢查是否登入
        function CheckAuthentication() {

            //缺少檢查函數

            window.location.href = "選擇登入身分.html"
        }

    </script>

</body>

</html>