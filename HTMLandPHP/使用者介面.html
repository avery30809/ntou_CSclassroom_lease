<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>使用者介面</title>
    <link rel="stylesheet" href="CSS/使用者介面.css">
</head>

<body>
    <nav>
        <!-- 左上半部欄位  -->
        <div class="logo-name">
            <div class="logo-image">
                <img src="image/usericon.png" alt="">
            </div>

            <span class="logo_name"></span>

        </div>

        <!-- 左下半部欄位 -->
        <div class="menu-items">
            <ul class="nav-links">
                <li><button onclick="clearAll() , showEditstate()">
                        <i><img src="image/user indormation.png" alt=""></i>
                        <span class="link-name">編輯個人資訊</span>
                    </button></li>

                <li><button onclick="clearAll() , showApplyrequest()">
                        <i><img src="image/applyrequest.png" alt=""></i>
                        <span class="link-name">申請紀錄</span>
                    </button></li>

            </ul>
            <ul class="logout-mode">
                <li class="logout">
                    <button id="logoutBtn">
                        <i><img src="image/logoutIcon.png" alt=""></i>
                        <span class="link-name">登出</span>
                    </button></li>
            </ul>

        </div>
    </nav>

    <section class="board">
        <!-- 右下半部欄位  -->
        <div class="board-top">
           <a href="Home.html"><img src="image/home.png"></a> 
        </div>
        <div class="board-content">

            <!--編輯使用者資訊 -->
            <div class="userInformation" id="userInformation">
                <div class="boardTitle">編輯個人資訊</div>
                <div class="hr"></div>
                <div class="userInformationContent">
                    <p class="quention_text">姓名 : </p>
                    <input type="text">
                </div>
                <div class="userInformationContent">
                    <p class="quention_text">學號 :
                        <button id="vertify" class="verification-button">驗證</button>
                    </p>
                    <input type="text">

                </div>
                <div class="userInformationContent">
                    <p class="quention_text">舊密碼 : </p>
                    <input type="text">
                </div>
                <div class="userInformationContent">
                    <p class="quention_text">新密碼 : </p>
                    <input type="text">
                </div>
                <div class="userInformationContent">
                    <p class="quention_text">聯絡手機 : </p>
                    <input type="text">
                </div>

                <div class="userInformationContent">
                    <button class="saveUserInformation" onclick="">儲存</button>
                </div>
            </div>

            <!--申請紀錄 -->
            <div class="Applyrequest" id="Applyrequest">
                <div class="boardTitle">申請紀錄</div>
                <div class="hr"></div>
                <div class="content">
                    <div class="title">
                        <p>XXX教室 <img src="image/dropdownIcon48.png" id="immediatelyFormImg1"
                                onclick="toggleContent('ApplyrequestConntent1','immediatelyFormImg1')">
                        </p>
                    </div>
                    <!-- 申請內容，若還在審查中，class為accounting，否則為OK -->
                    <div class="text" id="ApplyrequestConntent1">
                        <p>借用目的 : 研究項目討論</p>
                        <div class="ApplyrequestText">
                            <p>Start Time : </p>
                            <p>End Time : </p>
                            <p>2023/10/20 10.am</p>
                            <p>2023/10/20 11.am</p>
                            <button class="accounting">審核中</button>
                        </div>
                    </div>
                </div>

                <div class="content">
                    <div class="title">
                        <p>YYY教室 <img src="image/dropdownIcon48.png" id="immediatelyFormImg2"
                                onclick="toggleContent('ApplyrequestConntent2','immediatelyFormImg2')">
                        </p>
                    </div>
                    <!-- 申請內容，若還在審查中，class為accounting，否則為OK -->
                    <div class="text" id="ApplyrequestConntent2">
                        <p>借用目的 : 研究項目討論</p>
                        <div class="ApplyrequestText">
                            <p>Start Time : </p>
                            <p>End Time : </p>
                            <p>2023/10/20 10.am</p>
                            <p>2023/10/20 11.am</p>
                            <button class="ok">通過</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        let userInformation = document.getElementById("userInformation");
        let Applyrequest = document.getElementById("Applyrequest");
        const logoutButton = document.getElementById("logoutBtn");
        const logoName = document.querySelector(".logo_name");

        //獲取使用者身分
        let user = {
            username: "",
            useraccount: "",
            email: "",
            phone: null
        };
        fetch("獲取身分資訊.php", { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.error === undefined) {
                    user = data;
                    logoName.innerHTML = user.username;
                }
                else {
                    //沒有登入就回首頁
                    window.alert("請先登入！");
                    window.location.href = "Home.html";
                }
            });

        function clearAll() {
            Applyrequest.classList.remove("show");
            userInformation.classList.remove("show");

        }
        function showEditstate() {
            userInformation.classList.add("show");
        }

        function showApplyrequest() {
            Applyrequest.classList.add("show");
        }

        function toggleContent(ApplyrequestConntentId, ApplyrequestImageId) {
            let ApplyrequestConntent = document.getElementById(ApplyrequestConntentId);
            let ApplyrequestImage = document.getElementById(ApplyrequestImageId);
            ApplyrequestConntent.classList.toggle("show");
            ApplyrequestImage.classList.toggle("show");
        }
        // function openImmediatelyFormContent1() {
        //     ApplyrequestConntent1.classList.toggle("show");
        // }
        // function openImmediatelyFormContent2() {
        //     ApplyrequestConntent2.classList.toggle("show");
        // }

        logoutButton.addEventListener("click", () => {
            fetch("使用者登出.php", { method: 'POST' });
            window.location.href = "Home.html";
        }, false);

    </script>
</body>

</html>